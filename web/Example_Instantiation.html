<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Example_Instantiation</title>
</head>


<body>
<div class="head">
<h1>Theory Example_Instantiation</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> Example_Instantiation
  <span class="keyword2"><span class="keyword">imports</span></span>
    <a href="Reduction_of_Bisimilarity.html">Reduction_of_Bisimilarity</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">chapter</span></span> <span class="quoted"><span class="plain_text">‹Example Instantiation›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\label{chap:example_instantiation}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹To complete the proofs from \cref{chap:reductions}, I will show that mappings <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>stabilise›</span></span></span></span> (<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>ε(_)›</span></span></span></span>) and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>in_env›</span></span></span></span> (<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>θ?[_](_)›</span></span></span></span>), whose existence we assumed up to now, do, in fact, exist. I will define example mappings and show that, together with these, arbitrary <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_timeout›</span></span></span></span> can be interpreted as <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_timeout_mappable›</span></span></span></span>, thereby showing that the reductions are valid for arbitrary \LTSt{}s.

First, we define the types for $\Proc_\vartheta$ and $\Act_\vartheta$ in dependence on arbitrary types <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>'s›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>'a›</span></span></span></span> for $\Proc$ and $\Act$, respectively:›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> <span class="main">(</span><span class="tfree">'s</span><span class="main">,</span><span class="tfree">'a</span><span class="main">)</span>Proc_θ <span class="main">=</span> triggered <span class="tfree"><span class="quoted"><span class="tfree">'s</span></span></span> <span class="main">|</span> stable <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> set›</span></span> <span class="tfree"><span class="quoted"><span class="tfree">'s</span></span></span> <span class="main">|</span> DumpState
<span class="keyword1"><span class="command">datatype</span></span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ <span class="main">=</span> act <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="main">|</span> t_ε <span class="main">|</span> ε <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> set›</span></span> <span class="main">|</span> DumpAction

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Since $\Act \neq \Act_\vartheta$, we define a new predicate <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>tran_mappable›</span></span></span></span>.›</span></span>
<span class="keyword1"><span class="command">context</span></span> lts_timeout <span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">tran_mappable</span>
  <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool›</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">tran</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">p'</span></span></span> <span class="main">⟹</span> <span class="free">tran_mappable</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">(</span>act <span class="free"><span class="bound"><span class="entity">α</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">p'</span></span></span>›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We can now specify mappings <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>stabilise›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>in_env›</span></span></span></span>, mapping those <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>X›</span></span></span></span> for which $\varepsilon_X$ and $\vartheta_X$ are undefined to the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>DumpAction›</span></span></span></span>/<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>DumpState›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">function</span></span> <span class="entity">stabilise</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ set <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">α</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α'</span><span class="main">.</span> <span class="bound">α</span> <span class="main">=</span> act <span class="bound">α'</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">stabilise</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> ε <span class="main">{</span><span class="bound">α'</span> <span class="main">.</span> act <span class="bound">α'</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span>›</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">α</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">(</span><span class="main">∄</span> <span class="bound">α'</span><span class="main">.</span> <span class="bound">α</span> <span class="main">=</span> act <span class="bound">α'</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">stabilise</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">=</span> DumpAction›</span></span> 
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">termination</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"termination"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\pagebreak›</span></span>
<span class="keyword1"><span class="command">function</span></span> <span class="entity">in_env</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ set option <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'s</span><span class="main">,</span><span class="tfree">'a</span><span class="main">)</span>Proc_θ›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">in_env</span> None <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">=</span> triggered <span class="free"><span class="bound"><span class="entity">p</span></span></span>›</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">α</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α'</span><span class="main">.</span> <span class="bound">α</span> <span class="main">=</span> act <span class="bound">α'</span><span class="main">)</span> <span class="main">⟹</span> 
      <span class="free">in_env</span> <span class="main">(</span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">α'</span> <span class="main">.</span> act <span class="bound">α'</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span>›</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">α</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">(</span><span class="main">∄</span> <span class="bound">α'</span><span class="main">.</span> <span class="bound">α</span> <span class="main">=</span> act <span class="bound">α'</span><span class="main">)</span> <span class="main">⟹</span> 
      <span class="free">in_env</span> <span class="main">(</span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">=</span> DumpState›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">meson</span> Proc_θ.exhaust option.exhaust_sel<span class="main">)</span>
<span class="keyword1"><span class="command">termination</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"termination"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We show that, with these mappings, any <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_timeout›</span></span></span></span> (the context we are in) is an <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_timeout_mappable›</span></span></span></span>: when the variables that were fixed in the locale definition are instantiated by the terms and mappings from the current context, we prove that the assumptions of the locale definition hold. Thus, the reduction works for all \LTSt{}s.›</span></span>

<span class="comment1">(* For the following proofs, I gave up on writing readable proofs and simply used what sledgehammer gave me. This is the only part of the the thesis where I do this; sorry... *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> l1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="free">Y</span> <span class="free">x</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> lts_timeout.visible_actions tran_mappable <span class="main">(</span>act <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>act <span class="free">t</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted">‹stabilise <span class="free">X</span> <span class="main">=</span> stabilise <span class="free">Y</span>›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> a3<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">∈</span> <span class="free">X</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">∈</span> <span class="free">Y</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> a1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">X</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α</span><span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> act <span class="bound">α</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> tau_not_t Act_θ.inject<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> lts_timeout.intro lts_timeout.visible_actions_def mem_Collect_eq subset_iff tran_mappable.cases<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">∈</span> <span class="free">Y</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Act_θ.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> Act_θ.inject<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> a2 a3 mem_Collect_eq stabilise.elims<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> l2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X</span> <span class="free">Y</span> <span class="free">x</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> lts_timeout.visible_actions tran_mappable <span class="main">(</span>act <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>act <span class="free">t</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted">‹stabilise <span class="free">X</span> <span class="main">=</span> stabilise <span class="free">Y</span>›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> a3<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">∈</span> <span class="free">Y</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">∈</span> <span class="free">X</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> a1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">X</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α</span><span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> act <span class="bound">α</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> tau_not_t Act_θ.inject<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> lts_timeout.intro lts_timeout.visible_actions_def mem_Collect_eq subset_iff tran_mappable.cases<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">∈</span> <span class="free">X</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Act_θ.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> Act_θ.inject<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> a2 a3 mem_Collect_eq stabilise.elims<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="comment1">(*&gt;*)</span>
  
<span class="keyword1"><span class="command">lemma</span></span> is_mappable<span class="main">:</span> <span class="quoted"><span class="quoted">‹lts_timeout_mappable 
  tran_mappable <span class="main">(</span>act <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>act <span class="free">t</span><span class="main">)</span> t_ε stabilise in_env›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">standard</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">using</span></span> stabilise.elims tau_not_t <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">using</span></span> stabilise.elims <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">using</span></span> stabilise.elims <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> Act_θ.distinct<span class="main"><span class="main">(</span></span>7<span class="main"><span class="main">)</span></span> Act_θ.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> stabilise.elims<span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> l1 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">using</span></span> l2 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> Proc_θ.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Proc_θ.distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> in_env.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> in_env.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Proc_θ.distinct<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> Proc_θ.inject<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> l1 in_env.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> in_env.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> stabilise.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> stabilise.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> lts_timeout.visible_actions tran_mappable <span class="main">(</span>act <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>act <span class="free">t</span><span class="main">)</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted">‹in_env <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">p</span> <span class="main">=</span> in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> a3<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">Y</span>›</span></span>

    <span class="keyword1"><span class="command">from</span></span> a1 <span class="keyword1"><span class="command">have</span></span> q1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">X</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α</span><span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> act <span class="bound">α</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> empty_iff insert_iff l1 l2 stabilise.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> p1<span class="main">:</span> <span class="quoted"><span class="quoted">‹in_env <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">p</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">X</span><span class="main">}</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> in_env.simps<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>

    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">‹in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span> <span class="main">=</span> DumpState›</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> True
      <span class="keyword1"><span class="command">with</span></span> a2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹in_env <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">p</span> <span class="main">=</span> DumpState›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">X</span><span class="main">.</span> <span class="main">(</span><span class="main">∄</span> <span class="bound">α</span><span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> act <span class="bound">α</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Proc_θ.distinct<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> in_env.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">with</span></span> a1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> tau_not_t Act_θ.inject<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> in_mono lts_timeout.intro lts_timeout.visible_actions_def mem_Collect_eq tran_mappable.cases<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> False
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">Y</span><span class="main">}</span> <span class="skolem">q</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> in_env.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> in_env.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> q2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">Y</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α</span><span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> act <span class="bound">α</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"False"</span> in_env.simps<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">hence</span></span> p2<span class="main">:</span> <span class="quoted"><span class="quoted">‹in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">Y</span><span class="main">}</span> <span class="skolem">q</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> in_env.simps<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
      <span class="keyword1"><span class="command">with</span></span> p1 a2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹stable <span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">X</span><span class="main">}</span> <span class="skolem">p</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">Y</span><span class="main">}</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">X</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="bound">α</span> <span class="main">.</span> act <span class="bound">α</span> <span class="main">∈</span> <span class="skolem">Y</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
      <span class="keyword1"><span class="command">with</span></span> q1 q2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹stabilise <span class="skolem">X</span> <span class="main">=</span> stabilise <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">from</span></span> l2<span class="main">[</span><span class="operator">OF</span> a1 this a3<span class="main">]</span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="comment1">(* This is an automatically sledgehammer-generated Isar proof in all its beauty... ‹sorry› *)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">X</span> <span class="skolem">Y</span> <span class="skolem">p</span> <span class="skolem">q</span>
    <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">X</span> <span class="main">⊆</span> lts_timeout.visible_actions tran_mappable <span class="main">(</span>act <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>act <span class="free">t</span><span class="main">)</span>"</span></span>
    <span class="keyword3"><span class="command">assume</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted">"in_env <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">p</span> <span class="main">=</span> in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>"</span></span>
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">aa</span></span> <span class="keyword2"><span class="keyword">where</span></span>
      f3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">A</span> <span class="bound">p</span><span class="main">.</span> <span class="skolem">aa</span> <span class="bound">A</span> <span class="main">∈</span> <span class="bound">A</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> <span class="skolem">aa</span> <span class="bound">A</span> <span class="main">≠</span> act <span class="bound">a</span><span class="main">)</span> <span class="main">∨</span> in_env <span class="main">(</span>Some <span class="bound">A</span><span class="main">)</span> <span class="bound">p</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">a</span><span class="main">.</span> act <span class="bound">a</span> <span class="main">∈</span> <span class="bound">A</span><span class="main">}</span> <span class="bound">p</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">moura</span>
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">pp</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'s</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'s</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem"><span class="skolem">ppa</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'s</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>Act_θ <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'s</span>"</span></span> <span class="keyword2"><span class="keyword">where</span></span>
      <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x0</span> <span class="bound">x1</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span><span class="bound">v4</span> <span class="bound">v5</span><span class="main">.</span> <span class="bound">x1</span> <span class="bound">v4</span> <span class="bound">x0</span> <span class="bound">v5</span><span class="main">)</span> <span class="main">=</span> <span class="bound">x1</span> <span class="main">(</span><span class="skolem">pp</span> <span class="bound">x0</span> <span class="bound">x1</span><span class="main">)</span> <span class="bound">x0</span> <span class="main">(</span><span class="skolem">ppa</span> <span class="bound">x0</span> <span class="bound">x1</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">moura</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">aa</span> <span class="skolem">X</span> <span class="main">∈</span> <span class="skolem">X</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> <span class="skolem">aa</span> <span class="skolem">X</span> <span class="main">≠</span> act <span class="bound">a</span><span class="main">)</span> <span class="main">⟶</span> <span class="skolem">aa</span> <span class="skolem">X</span> <span class="main">≠</span> act <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">aa</span> <span class="skolem">X</span> <span class="main">≠</span> act <span class="free">t</span> <span class="main">∧</span> tran_mappable <span class="main">(</span><span class="skolem">pp</span> <span class="main">(</span><span class="skolem">aa</span> <span class="skolem">X</span><span class="main">)</span> tran_mappable<span class="main">)</span> <span class="main">(</span><span class="skolem">aa</span> <span class="skolem">X</span><span class="main">)</span> <span class="main">(</span><span class="skolem">ppa</span> <span class="main">(</span><span class="skolem">aa</span> <span class="skolem">X</span><span class="main">)</span> tran_mappable<span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> a1
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> ccfv_threshold<span class="main"><span class="main">)</span></span> Act_θ.inject<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> lts_timeout.intro lts_timeout.visible_actions_def mem_Collect_eq subsetD tau_not_t<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f4<span class="main">:</span> <span class="quoted"><span class="quoted">"in_env <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">p</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">a</span><span class="main">.</span> act <span class="bound">a</span> <span class="main">∈</span> <span class="skolem">X</span><span class="main">}</span> <span class="skolem">p</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> f3 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> tran_mappable.cases<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span> <span class="main">≠</span> DumpState"</span></span>
      <span class="keyword1"><span class="command">using</span></span> a2 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Proc_θ.distinct<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"in_env <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span> <span class="main">=</span> stable <span class="main">{</span><span class="bound">a</span><span class="main">.</span> act <span class="bound">a</span> <span class="main">∈</span> <span class="skolem">Y</span><span class="main">}</span> <span class="skolem">q</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> f3 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> in_env.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">=</span> <span class="skolem">q</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> f4 a2 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> Proc_θ.inject<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> Act_θ.distinct<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> Act_θ.simps<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> stabilise.elims tran_mappable.simps<span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tran_mappable.simps<span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of <span class="antiquoted"><span class="raw_text"><span class="operator">‹</span>context lts_timeout›</span></span>›</span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹A Tiny Example \LTSt{}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\lts{
    \node[state]    (p0)                            {$p_0$};
    \node[state]    (p1) [below left of=p0]         {$p_1$};
    \node[state]    (p2) [below right of=p0]        {$p_2$};
    \node[state]    (q0) [right of=p0,xshift=3cm]   {$q_0$};
    \node[state]    (q1) [below of=q0]         {$q_1$};
    
    \path   (p0) edge node[above left]  {$\tau$}(p1)
                 edge node              {$t$}   (p2)
            (q0) edge node[above left]  {$\tau$}(q1);
}›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> Proc <span class="main">=</span> p0<span class="main">|</span>p1<span class="main">|</span>p2<span class="main">|</span>q0<span class="main">|</span>q1
<span class="keyword1"><span class="command">datatype</span></span> Act <span class="main">=</span> τ<span class="main">|</span>t
<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">Tran</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹Proc <span class="main">⇒</span> Act <span class="main">⇒</span> Proc <span class="main">⇒</span> bool›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">Tran</span> p0 τ p1›</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="free">Tran</span> p0 t p2›</span></span>
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="free">Tran</span> q0 τ q1›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We interpret the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Tran›</span></span></span></span> predicate as an <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_timeout›</span></span></span></span>, and then together with our mappings as an <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_timeout_mappable›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">interpretation</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> tiny_lts<span class="main">:</span> 
  lts_timeout <span class="quoted">Tran</span> <span class="quoted">τ</span> <span class="quoted">t</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> lts_timeout.intro<span class="main">)</span>
<span class="keyword1"><span class="command">interpretation</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> tiny_lts_mappable<span class="main">:</span> 
  lts_timeout_mappable <span class="quoted">tiny_lts.tran_mappable</span> <span class="quoted"><span class="quoted">‹act τ›</span></span> <span class="quoted"><span class="quoted">‹act t›</span></span> <span class="quoted"><span class="quoted">‹t_ε›</span></span> 
  <span class="quoted">tiny_lts.stabilise</span> <span class="quoted">tiny_lts.in_env</span> 
  <span class="keyword1"><span class="command">using</span></span> tiny_lts.is_mappable <span class="keyword1"><span class="command">.</span></span>
<span class="comment1">― ‹(notation assignments omitted from thesis document)›</span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">notation</span></span> tiny_lts.tran_mappable <span class="main">(</span><span class="quoted">"_ <span class="keyword1">⟼</span>_ _"</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">,</span> 70<span class="main">]</span> 80<span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> tiny_lts.stabilise <span class="main">(</span><span class="quoted">‹<span class="keyword1">ε[</span>_<span class="keyword1">]</span>›</span><span class="main">)</span> 
<span class="keyword1"><span class="command">notation</span></span> tiny_lts_mappable.triggered_env <span class="main">(</span><span class="quoted">‹<span class="keyword1">θ'(</span>_<span class="keyword1">')</span>›</span><span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> tiny_lts_mappable.stable_env <span class="main">(</span><span class="quoted">‹<span class="keyword1">θ[</span>_<span class="keyword1">]'(</span>_<span class="keyword1">')</span>›</span><span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> tiny_lts_mappable.strongly_reactive_bisimilar <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> tiny_lts_mappable.strongly_X_bisimilar <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span>_ _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> tiny_lts_mappable.tran_theta <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span>_ _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">strongly_bisimilar_theta</span> 
  <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔</span> _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">strongly_bisimilar_theta</span> <span class="main">≡</span> lts.strongly_bisimilar tiny_lts_mappable.tran_theta›</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">idle</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">idle</span> <span class="main">≡</span> tiny_lts_mappable.idle›</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We can now prove a few lemmas about our example \LTSt{} that we would need for any bisimilarity proofs. I abstained from actually including a bisimilarity proof, but these lemmas should, hopefully, suffice to convince you that it would be possible.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> <span class="quoted"><span class="quoted">‹tiny_lts_mappable.visible_actions <span class="main">=</span> <span class="main">∅</span>›</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹tiny_lts.visible_actions <span class="main">=</span> <span class="main">∅</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> tiny_lts.visible_actions_def 
      Act.exhaust Collect_cong empty_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹tiny_lts_mappable.visible_actions 
      <span class="main">=</span> image <span class="main">(</span><span class="main">λ</span> <span class="bound">α</span><span class="main">.</span> act <span class="bound">α</span><span class="main">)</span> tiny_lts.visible_actions›</span></span>
    <span class="keyword1"><span class="command">using</span></span> Act.exhaust 
      tiny_lts.tran_mappable.simps 
      tiny_lts.visible_actions_def 
      tiny_lts_mappable.visible_actions_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> <span class="quoted"><span class="quoted">‹<span class="main">∄</span> <span class="bound">P'</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="main">∅</span><span class="main">](</span>p0<span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="main">(</span>act t<span class="main">)</span> <span class="bound">P'</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">safe</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="main">∅</span><span class="main">](</span>p0<span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="main">(</span>act t<span class="main">)</span> <span class="skolem">P'</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹idle p0 <span class="main">∅</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> tiny_lts_mappable.generation_sys_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹p0 <span class="main">⟼</span><span class="main">(</span>act τ<span class="main">)</span> p1›</span></span> <span class="keyword1"><span class="command">using</span></span> Tran.intros<span class="main">(</span>1<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tiny_lts.tran_mappable.intros<span class="main">)</span>

  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹idle p0 <span class="main">∅</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> 
    <span class="keyword1"><span class="command">unfolding</span></span> tiny_lts_mappable.initial_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of ‹theory››</span>
<span class="comment1">(*&gt;*)</span></pre>
</body>

</html>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory HM_Logic_with_TimeOuts</title>
</head>


<body>
<div class="head">
<h1>Theory HM_Logic_with_TimeOuts</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> HM_Logic_with_TimeOuts
  <span class="keyword2"><span class="keyword">imports</span></span> 
    <a href="Reactive_Bisimilarity.html">Reactive_Bisimilarity</a>
    <span class="quoted">"<a href="../../HOL/HOL-Library/Countable_Set_Type.html">HOL-Library.Countable_Set_Type</a>"</span>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Hennessy-Milner Logic with Time-Outs›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\label{sec:HMLt}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹In <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> ‹section 3› rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span>, van~Glabbeek extends Hennessy-Milner logic by a family of new modal operators $\langle X \rangle \varphi$ for $X \subseteq A$, as well as additional satisfaction relations $\vDash_X$ for $X \subseteq A$. Intuitively, $p \vDash \langle X \rangle \varphi$ means that $p$ is idle when placed in an environment~$X$ \emph{and} $p$ can perform a $t$-transition into a state that satisfies $\varphi$; $p \vDash_X \varphi$ means that $p$ satisfies $\varphi$ in environments~$X$.

I will refer to this extension as \emph{Hennessy-Milner Logic with Time-Outs} (\HMLt{}) and to $\langle X \rangle$ for $X \subseteq A$ as the \emph{time-out--possibility operators} (to be distinguished from the ordinary possibility operators $\langle \alpha \rangle$ for $\alpha \in \Act$).

The precise semantics are given by the following inductive definition of the satisfaction relation <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> ‹section 3› rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span> (notation adapted):

\begin{tabular}{l l l}
    $p \vDash \bigwedge_{i \in I} \varphi_i$ 
    &amp; \text{if} 
    &amp; $\forall i \in I.\; p \vDash \varphi_i$ \\
    
    $p \vDash \neg\varphi$
    &amp; \text{if} 
    &amp; $p \not\vDash \varphi$ \\
    
    $p \vDash \langle \alpha \rangle \varphi$ \quad with $\alpha \in A \cup \{\tau\}$
    &amp; \text{if} 
    &amp; $\exists p'.\; p \xrightarrow{\alpha} p' \wedge p' \vDash \varphi$ \\
    
    $p \vDash \langle X \rangle \varphi$ \quad with $X \subseteq A$
    &amp; \text{if} 
    &amp; $\mathcal{I}(p) \cap (X \cup \{\tau\}) = \emptyset \wedge \exists p'.\; p \xrightarrow{t} p' \wedge p' \vDash_X \varphi$ \\[1em]
    
    
    $p \vDash_X \bigwedge_{i \in I} \varphi_i$ 
    &amp; \text{if} 
    &amp; $\forall i \in I.\; p \vDash_X \varphi_i$ \\
    
    $p \vDash_X \neg\varphi$
    &amp; \text{if} 
    &amp; $p \not\vDash_X \varphi$ \\
    
    $p \vDash_X \langle a \rangle \varphi$ \quad with $a \in A$
    &amp; \text{if} 
    &amp; $a \in X \wedge \exists p'.\; p \xrightarrow{a} p' \wedge p' \vDash \varphi$ \\
    
    $p \vDash_X \langle \tau \rangle \varphi$
    &amp; \text{if} 
    &amp; $\exists p'.\; p \xrightarrow{\tau} p' \wedge p' \vDash_X \varphi$ \\[0.5em]
    
    
    $p \vDash_X \varphi$
    &amp; \text{if} 
    &amp; $\mathcal{I}(p) \cap (X \cup \{\tau\}) = \emptyset \wedge p \vDash \varphi$
\end{tabular}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The same intuitions regarding triggered and stable environments as for the definition of strong reactive bisimulations in \cref{sec:strong_bisimilarity} hold. $\vDash$ expresses that a property holds in indeterminate environments and $\vDash_X$ that a property holds in stable environments~$X$. The last clause expresses the possibility of stable environments timing out into triggered environments.

Van~Glabbeek then also proves that \HMLt{} characterises strong reactive/$X$-bisimilarity, i.e.\@ that 
$p \leftrightarrow_r q \iff (\forall \varphi .\; p \vDash \varphi \longleftrightarrow q \vDash \varphi)$ and 
$p \leftrightarrow_r^X q \iff (\forall \varphi .\; p \vDash_X \varphi \longleftrightarrow q \vDash_X \varphi)$,
where $\varphi$ are formulas of \HMLt{}.
A replication of the proof of this characterisation, however, is not part of this thesis.
›</span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Isabelle›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The following formalisation is analogous to the one in \cref{sec:HML}.›</span></span>

<span class="keyword1"><span class="command">datatype</span></span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula <span class="main">=</span>
  HMLt_conj <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula cset›</span></span> <span class="comment1">― ‹$\bigwedge \Phi$›</span> 
<span class="main">|</span> HMLt_neg <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula›</span></span> <span class="comment1">― ‹$\neg\varphi$›</span> 
<span class="main">|</span> HMLt_poss <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula›</span></span> <span class="comment1">― ‹$\langle\alpha\rangle\varphi$›</span> 
<span class="main">|</span> HMLt_time <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> set›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula›</span></span> <span class="comment1">― ‹$\langle X \rangle\varphi$›</span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">notation</span></span><span class="comment1">✐<span class="quoted">‹tag unimportant›</span></span> cin <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> _›</span> <span class="main">[</span>100<span class="main">,</span> 100<span class="main">]</span> 100<span class="main">)</span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹In order to formalise the semantics, I combined both the usual satisfaction relation $\vDash$ and the environment satisfaction relations $\vDash_X$ into one predicate, which is formalised by the function <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>HMLt_sat›</span></span></span></span> below, where <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[None] φ›</span></span></span></span> corresponds to $p \vDash \varphi$ and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[Some X] φ›</span></span></span></span> corresponds to $p \vDash_X \varphi$. 

Note that, in Isabelle code, I use the symbol <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⊫›</span></span></span></span> for all satisfaction relations in the context of \HMLt{}, whereas I use <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⊨›</span></span></span></span> for satisfaction relations in the context of ordinary HML. 
This notational nuance will be important when we examine the relationship between the satisfaction relations of \HMLt{} and HML in the context of the reduction in \cref{sec:reduction_satisfaction}.

The first four clauses of my formalisation are clearly direct translations of the clauses for the satisfaction relation $\vDash$ above. It is less easy to see that the next four clauses do, in fact, correspond to the five clauses for $\vDash_X$. 

First, each of the four clauses below includes the requirement that <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>X›</span></span></span></span> is a subset of the visible actions; in the original definition, the satisfaction relations $\vDash_X$ are only defined for those $X$ to begin with.

Next, the clause for <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[Some X] (HMLt_poss α φ)›</span></span></span></span> combines the original clauses for $p \vDash_X \langle a \rangle \varphi$ and $p \vDash_X \langle \tau \rangle \varphi$. 

Lastly and most importantly, the last clause of the original definition, stating that $p \vDash_X \varphi$ if $p$ is idle in environments~$X$ and $p \vDash \varphi$, is added disjunctively to the cases <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[Some X] (HMLt_poss α φ)›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[Some X] (HMLt_time Y φ)›</span></span></span></span>; the latter case is not part of the original definition and can only be true by virtue of the last clause of the original definition, wherefore this is the only way for this case in the function definition below to be true. 

I will show below that this is sufficient to assure that my satisfaction function satisfies the last clause of the original definition, i.e.\@ that it is not required to be added disjunctively to the cases <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[Some X] (HMLt_conj Φ)›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[Some X] (HMLt_neg φ)›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">context</span></span> lts_timeout <span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">function</span></span> <span class="entity">HMLt_sat</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span><span class="main">⇒</span><span class="tfree">'a</span> set option<span class="main">⇒</span><span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula <span class="main">⇒</span> bool›</span></span> 
  <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">⊫?[</span>_<span class="keyword1">]</span> _›</span> <span class="main">[</span>50<span class="main">,</span> 50<span class="main">,</span> 50<span class="main">]</span> 50<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span>
    <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_conj <span class="free"><span class="bound"><span class="entity">Φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> 
      <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="free"><span class="bound"><span class="entity">Φ</span></span></span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="bound">φ</span><span class="main">)</span>›</span></span> 
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_neg <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> 
      <span class="main">(</span><span class="main">¬</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span>›</span></span> 
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_poss <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> 
      <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="main">∈</span> visible_actions <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span><span class="main">)</span> <span class="main">∧</span> 
       <span class="main">(</span><span class="main">∃</span> <span class="bound">p'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⟼</span></span><span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span>›</span></span> 
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_time <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> 
      <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⊆</span> visible_actions<span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>idle <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">∧</span> 
       <span class="main">(</span><span class="main">∃</span> <span class="bound">p'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span>›</span></span> 
  
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_conj <span class="free"><span class="bound"><span class="entity">Φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⊆</span> visible_actions <span class="main">∧</span>
      <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="free"><span class="bound"><span class="entity">Φ</span></span></span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="bound">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> 
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_neg <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⊆</span> visible_actions <span class="main">∧</span>
      <span class="main">(</span><span class="main">¬</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span>›</span></span> 
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_poss <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⊆</span> visible_actions <span class="main">∧</span>
      <span class="main">(</span><span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">p'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⟼</span></span><span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∨</span> 
       <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="main">=</span> <span class="free">τ</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">p'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∨</span> 
       <span class="main">(</span><span class="main">(</span>idle <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_poss <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> 
  <span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_time <span class="free"><span class="bound"><span class="entity">Y</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">⊆</span> visible_actions <span class="main">∧</span>
      <span class="main">(</span><span class="main">(</span>idle <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫?[</span></span>None<span class="main"><span class="free">]</span></span> <span class="main">(</span>HMLt_time <span class="free"><span class="bound"><span class="entity">Y</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> HMLt_formula.exhaust
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> not_Some_eq prod_cases3<span class="main"><span class="keyword3">,</span></span> <span class="operator">fast</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The well-founded relation used for the termination proof of the satisfaction function is considerably more difficult due to the last line of the definition containing the same formula on both sides of the implication (as opposed to the other lines of the definition, where the premises only contain subformulas of the formula in the conclusion). We define two relations <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>R›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>S›</span></span></span></span>, prove their well-foundedness separately, and show that <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>R O S ⊆ R›</span></span></span></span> (where <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>O›</span></span></span></span> is relation composition), yielding that the union of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>R›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>S›</span></span></span></span> is well-founded using the theorem <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">thm</span></span> wf_union_compatible<span class="antiquote"><span class="antiquote">}</span></span></span></span>. Further details are omitted from the thesis document.›</span></span>


<span class="comment1">(* These lemmas are not important for the thesis document. *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">inductive_set</span></span><span class="comment1">✐<span class="quoted">‹tag unimportant›</span></span> <span class="entity">HMLt_wf_rel_1</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'s</span> <span class="main">×</span> <span class="tfree">'a</span> set option <span class="main">×</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula<span class="main">)</span> rel›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="free"><span class="bound"><span class="entity">Φ</span></span></span> <span class="main">⟹</span> <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN'</span></span></span><span class="main">,</span> HMLt_conj <span class="free"><span class="bound"><span class="entity">Φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="free">HMLt_wf_rel_1</span>›</span></span> <span class="main">|</span>
  <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN'</span></span></span><span class="main">,</span> HMLt_neg <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="free">HMLt_wf_rel_1</span>›</span></span> <span class="main">|</span>
  <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN'</span></span></span><span class="main">,</span> HMLt_poss <span class="free"><span class="bound"><span class="entity">α</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="free">HMLt_wf_rel_1</span>›</span></span> <span class="main">|</span>
  <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p'</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">XoN'</span></span></span><span class="main">,</span> HMLt_time <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="free">HMLt_wf_rel_1</span>›</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> HMLt_wf_rel_1_is_wf<span class="main">:</span> <span class="quoted"><span class="quoted">‹wf HMLt_wf_rel_1›</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> wf_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> allI<span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> impI<span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> allI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span><span class="main">::</span><span class="quoted"><span class="quoted">‹<span class="tfree">'s</span> <span class="main">×</span> <span class="tfree">'a</span> set option <span class="main">×</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">t</span><span class="main">::</span><span class="quoted"><span class="quoted">‹<span class="tfree">'s</span> <span class="main">×</span> <span class="tfree">'a</span> set option <span class="main">×</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula›</span></span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">XoN</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">t</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">XoN</span><span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> prod_cases3 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">y</span><span class="main">,</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1 <span class="main">⟶</span> <span class="skolem">P</span> <span class="bound">y</span><span class="main">)</span> <span class="main">⟶</span> <span class="skolem">P</span> <span class="bound">x</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">XoN</span><span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">φ</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">p</span></span> <span class="quoted"><span class="skolem">XoN</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1_def case_prodD case_prodE' mem_Collect_eq HMLt_formula.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>3<span class="main"><span class="main">,</span></span>5<span class="main"><span class="main">)</span></span> HMLt_formula.inject<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1p.simps HMLt_wf_rel_1p_HMLt_wf_rel_1_eq cin.rep_eq prod_cases3<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1_def case_prodD case_prodE' mem_Collect_eq HMLt_formula.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>7<span class="main"><span class="main">,</span></span>9<span class="main"><span class="main">)</span></span> HMLt_formula.inject<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1.simps surj_pair<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1_def case_prodD case_prodE' mem_Collect_eq HMLt_formula.distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">,</span></span>7<span class="main"><span class="main">,</span></span>11<span class="main"><span class="main">)</span></span> HMLt_formula.inject<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1.simps surj_pair<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> del_insts<span class="main"><span class="main">)</span></span> HMLt_formula.distinct<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">,</span></span>9<span class="main"><span class="main">,</span></span>12<span class="main"><span class="main">)</span></span> HMLt_formula.inject<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> HMLt_wf_rel_1.simps HMLt_wf_rel_1_def case_prodD case_prodE' mem_Collect_eq<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="skolem">t</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">t</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">XoN</span><span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">inductive_set</span></span><span class="comment1">✐<span class="quoted">‹tag unimportant›</span></span> <span class="entity">HMLt_wf_rel_2</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'s</span> <span class="main">×</span> <span class="tfree">'a</span> set option <span class="main">×</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula<span class="main">)</span> rel›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">,</span> None<span class="main">,</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">,</span> Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="free">HMLt_wf_rel_2</span>›</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> HMLt_wf_rel_2_is_wf<span class="main">:</span> <span class="quoted"><span class="quoted">‹wf HMLt_wf_rel_2›</span></span> 
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> HMLt_wf_rel_2.simps wf_def<span class="main">)</span>

<span class="keyword1"><span class="command">abbreviation</span></span><span class="comment1">✐<span class="quoted">‹tag unimportant›</span></span> <span class="entity">HMLt_wf_rel</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">HMLt_wf_rel</span> <span class="main">≡</span> <span class="main">(</span>HMLt_wf_rel_1 <span class="main">∪</span> HMLt_wf_rel_2<span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> HMLt_wf_rel_is_wf<span class="main">:</span> <span class="quoted"><span class="quoted">‹wf HMLt_wf_rel›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> wf_union_compatible<span class="main"><span class="main">[</span></span><span class="operator">OF</span> HMLt_wf_rel_1_is_wf HMLt_wf_rel_2_is_wf<span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">standard</span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">tup</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">tup</span> <span class="main">∈</span> HMLt_wf_rel_1 <span class="keyword1">O</span> HMLt_wf_rel_2›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="skolem"><span class="skolem">c</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">c</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">tup</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">c</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1 <span class="keyword1">O</span> HMLt_wf_rel_2›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> relcomp.simps <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">b</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">b</span><span class="main">,</span> <span class="skolem">c</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_2›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">b</span><span class="main">,</span> <span class="skolem">c</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_2›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">X</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">b</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> None<span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">c</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> Some <span class="skolem">X</span><span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> HMLt_wf_rel_2.cases surj_pair<span class="main">)</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> None<span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">b</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">b</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> None<span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> Some <span class="skolem">X</span><span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> None<span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> HMLt_wf_rel_1›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">a</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>fields <span class="skolem">p'</span> <span class="skolem">XoN</span> <span class="skolem">φ'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">φ'</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">p'</span></span> <span class="quoted"><span class="skolem">XoN</span></span><span class="main"><span class="keyword3">,</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> HMLt_wf_rel_1.simps<span class="main">)</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">tup</span> <span class="main">∈</span> HMLt_wf_rel_1›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">c</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">tup</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">c</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">p</span><span class="main">,</span> Some <span class="skolem">X</span><span class="main">,</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">termination</span></span> <span class="quoted">HMLt_sat</span> <span class="keyword1"><span class="command">using</span></span> HMLt_wf_rel_is_wf <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">standard</span><span class="main"><span class="keyword3">,</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> HMLt_wf_rel_1.intros HMLt_wf_rel_2.intros<span class="main">)</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We can now introduce the more readable notation (more closely corresponding to the notation in <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span>) through abbreviations.›</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">HMLt_sat_triggered</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span><span class="main">⇒</span><span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula <span class="main">⇒</span> bool›</span></span> 
  <span class="main">(</span><span class="quoted">"_ <span class="keyword1">⊫</span> _"</span> <span class="main">[</span>50<span class="main">,</span> 50<span class="main">]</span> 50<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">⊫?[</span>None<span class="main">]</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span>›</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">HMLt_sat_stable</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span><span class="main">⇒</span><span class="tfree">'a</span> set<span class="main">⇒</span><span class="main">(</span><span class="tfree">'a</span><span class="main">)</span>HMLt_formula <span class="main">⇒</span> bool›</span></span>
  <span class="main">(</span><span class="quoted">"_ <span class="keyword1">⊫[</span>_<span class="keyword1">]</span> _"</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">,</span> 70<span class="main">]</span> 80<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="free">⊫[</span></span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">⊫?[</span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">]</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span>›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Lastly, we show (by induction over <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>φ›</span></span></span></span>) that the function <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>HMLt_sat›</span></span></span></span> does indeed satisfy the last clause of the original definition.›</span></span>


<span class="comment1">(* These lemma is not important for the thesis document. *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> idle_sat_lemma<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> 
    <span class="quoted"><span class="quoted">‹idle <span class="free">p</span> <span class="free">X</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">p</span> <span class="main">⊫</span> <span class="free">φ</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">p</span> <span class="main">⊫[</span><span class="free">X</span><span class="main">]</span> <span class="free">φ</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">φ</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_conj <span class="skolem">Φ</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> cin.rep_eq HMLt_sat.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_neg <span class="skolem">φ</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫[</span><span class="free">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_sat.simps<span class="main">(</span>7<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫[</span><span class="free">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="free">X</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span><span class="main">)</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫[</span><span class="free">X</span><span class="main">]</span> <span class="skolem">φ</span><span class="main">)</span> <span class="main">∨</span> idle <span class="free">p</span> <span class="free">X</span> <span class="main">∧</span> <span class="free">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> HMLt_sat.simps<span class="main">(</span>7<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹idle <span class="free">p</span> <span class="free">X</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> UnCI assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> idle_no_derivatives singletonI<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_sat.simps<span class="main">(</span>8<span class="main">)</span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">proposition</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="quoted"><span class="quoted">‹idle <span class="free">p</span> <span class="free">X</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫</span> <span class="free">φ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫[</span><span class="free">X</span><span class="main">]</span> <span class="free">φ</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> idle_sat_lemma<span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">,</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">..</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹As the last clause of van Glabbeek's definition is the main disparity to the function definition of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>HMLt_sat›</span></span></span></span>, this proposition gives confidence that the function does indeed formalise the original definition.›</span></span>

<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of <span class="antiquoted"><span class="raw_text"><span class="operator">‹</span>context lts_timeout›</span></span>›</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of ‹theory›
(*&gt;*)›</span></pre>
</body>

</html>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Reactive_Bisimilarity</title>
</head>


<body>
<div class="head">
<h1>Theory Reactive_Bisimilarity</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> Reactive_Bisimilarity
<span class="keyword2"><span class="keyword">imports</span></span> 
  <a href="Labelled_Transition_Systems_with_TimeOuts.html">Labelled_Transition_Systems_with_TimeOuts</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Reactive Bisimilarity›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\label{sec:reactive_bisimilarity}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹In the examples of the previous section, we saw that there are \LTSt{}s with transitions that can never be performed or that can only be performed in certain environments. The behavioural equivalence implied hereby is defined in <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span> as \emph{strong reactive bisimilarity}.

\example{%
The processes $p$ and $q$ are behaviourally equivalent for \LTSt{} semantics, i.e.\@ strongly reactive bisimilar.

\lts{
    \node[state]    (p0)                            {$p$};
    \node[state]    (p1) [below left of=p0]         {$p_1$};
    \node[state]    (p2) [below right of=p0]        {$p_2$};
    \node[state]    (p3) [below left of=p2]         {$p_3$};
    \node[state]    (p4) [below right of=p2]        {$p_4$};
    
    \path   (p0) edge node[above left]  {$a$}   (p1)
                 edge node              {$t$}   (p2)
            (p2) edge node[above left]  {$\tau$}(p3)
                 edge node              {$a$}   (p4);
                 
    \node[state]    (q0) [right of=p0,xshift=5cm]   {$q$};
    \node[state]    (q1) [below left of=q0]         {$q_1$};
    \node[state]    (q2) [below right of=q0]        {$q_2$};
    \node[state]    (q3) [below left of=q2]         {$q_3$};
    
    \path   (q0) edge node[above left]  {$a$}   (q1)
                 edge node              {$t$}   (q2)
            (q2) edge node[above left]  {$\tau$}(q3);
}}›</span></span>

<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Strong Reactive Bisimulations›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Van~Glabbeek introduces several characterisations of this equivalence, beginning with \emph{strong reactive bisimulation} (SRB) relations. These differ from strong bisimulations in that the relations contain not only pairs of processes $(p,q)$, but additionally triples consisting of two processes and a set of actions $(p,X,q)$. The following definition of SRB relations is quoted, with minor adaptations, from <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> ‹Definition 1› rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span>:

A \emph{strong reactive bisimulation} is a symmetric relation 
$$\mathcal{R} \subseteq (\Proc \times \mathcal{P}(A) \times \Proc) \cup (\Proc \times \Proc)$$
(meaning that $(p,X,q)\!\in\!\mathcal{R}\!\iff\!(q,X,p)\!\in\!\mathcal{R}$ and
$(p,q)\!\in\!\mathcal{R}\!\iff\!(q,p)\!\in\!\mathcal{R}$),\\
such that,
\newpage
for all $(p,q) \in \mathcal{R}$:
\begin{enumerate}
    \item if $p \xrightarrow{\tau} p'$, then $\exists q'$ such that $q \xrightarrow{\tau} q'$ and $(p',q') \in \mathcal{R}$,
    \item $(p,X,q) \in \mathcal{R}$ for all $X \subseteq A$,
\end{enumerate}
and for all $(p,X,q) \in \mathcal{R}$:
\begin{enumerate}
    \setcounter{enumi}{2}
    \item if $p \xrightarrow{a} p'$ with $a \in X$, then $\exists q'$ such that $q \xrightarrow{a} q'$ and $(p',q') \in \mathcal{R}$,
    \item if $p \xrightarrow{\tau} p'$, then $\exists q'$ such that $q \xrightarrow{\tau} q'$ and $(p',X,q') \in \mathcal{R}$,
    \item if $\mathcal{I}(p) \cap (X \cup \{\tau\}) = \emptyset$, then $(p,q) \in \mathcal{R}$, and
    \item if $\mathcal{I}(p) \cap (X \cup \{\tau\}) = \emptyset$ and $p \xrightarrow{t} p'$, then $\exists q'$ such that $q \xrightarrow{t} q'$ and $(p',X,q') \in \mathcal{R}$.
\end{enumerate}

We can derive the following intuitions: an environment can either be stable, allowing a specific set of actions, or indeterminate. Indeterminate environments cannot facilitate any transitions, but they can stabilise into arbitrary stable environments. This is expressed by clause 2. Hence, $X$-bisimilarity is behavioural equivalence in stable environments~$X$, and reactive bisimilarity is behavioural equivalence in indeterminate environments (and thus in arbitrary stable environments).

Since only stable environments can facilitate transitions, there are no clauses involving visible action transitions for $(p,q) \in \mathcal{R}$. However, $\tau$-transitions can be performed regardless of the environment, hence clause 1.

At this point, it is important to discuss what exactly it means for an action to be visible or hidden in this context: as we saw in the last section, the environment cannot react (change its set of allowed actions) when the system performs a $\tau$- or a $t$-transition, since these are hidden actions. However, since we are talking about a \emph{strong} bisimilarity (as opposed to e.g.\@ weak bisimilarity), the performance of $\tau$- or $t$-transitions is still relevant when examining and comparing the behavior of systems.

With that, we can look more closely at the remaining clauses:
in clause 3, given $(p,X,q) \in \mathcal{R}$, for $p \xrightarrow{a} p'$ with $a \in X$, we require for the \enquote{mirroring} state $q'$ that $(p',q') \in \mathcal{R}$, because $a$ is a visible action and the transition can thus trigger a change of the environment;%
\footnote{This is why van~Glabbeek talks about \emph{triggered} environments rather than indeterminate ones. I will use both terms interchangeably.}
on the other hand, in clause 4, for $p \xrightarrow{\tau} p'$, and in clause 6, for $p \xrightarrow{t} p'$, we require $(p',X,q') \in \mathcal{R}$, because these actions are hidden and cannot trigger a change of the environment.

Lastly, clause 5 formalises the possibility of the environment timing out (i.e.\@ turning into an indeterminate environment) instead of the system.

These intuitions also form the basis for the process mapping which will be presented in \cref{sec:mapping_lts}.›</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Strong Reactive/$X$-Bisimilarity›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Two processes $p$ and $q$ are \emph{strongly reactive bisimilar} ($p \leftrightarrow_r q$) iff there is an SRB containing $(p,q)$, and \emph{strongly $X$-bisimilar} ($p \leftrightarrow_r^X q$), i.e.\@ \enquote{equivalent} in environments~$X$, when there is an SRB containing $(p,X,q)$.›</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Generalised Strong Reactive Bisimulations›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Another characterisation of reactive bisimilarity uses \emph{generalised strong reactive bisimulation} (GSRB) relations, defined over the same set as SRBs, but with different clauses <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> ‹Definition 3› rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span>. It is proved that both characterisations do, in fact, characterise the same equivalence. More details will be discussed in the formalisation below.›</span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Isabelle›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹I first formalise both SRB and GSRB relations (as well as strong reactive bisimilarity, defined by the existence of an SRB, as above), and then replicate the proof of their correspondence.›</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Strong Reactive Bisimulations›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹SRB relations are defined over the set
$$(\Proc \times \mathscr{P}(A) \times \Proc) \cup (\Proc \times \Proc).$$

As can be easily seen, this set it isomorphic to
$$(\Proc \times (\mathscr{P}(A) \cup \{\bot\}) \times \Proc),$$
which is a subset of
$$(\Proc \times (\mathscr{P}(\Act) \cup \{\bot\}) \times \Proc).$$ 

This last set can now be easily formalised in terms of a type, where we formalise
$\mathscr{P}(\Act) \cup \{\bot\}$
as <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>'a set option›</span></span></span></span>.

The fact that SRBs are defined using the power set of visible actions ($A$), whereas our type uses all actions ($\Act$ / <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>'a›</span></span></span></span>), is handled by the first line of the definition below. The second line formalises that symmetry is required by definition. All other lines are direct formalisations of the clauses of the original definition.
\pagebreak›</span></span>

<span class="keyword1"><span class="command">context</span></span> lts_timeout <span class="keyword2"><span class="keyword">begin</span></span>

<span class="comment1">― ‹strong reactive bisimulation <span class="antiquoted"><span class="antiquote">@{</span><span class="operator">cite</span> ‹Definition 1› rbs<span class="antiquote">}</span></span>›</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">SRB</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'s</span> <span class="main">⇒</span> <span class="tfree">'a</span> set option <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> bool›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">SRB</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span>
  <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">X</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span>  <span class="main">⟶</span>  <span class="bound">X</span> <span class="main">⊆</span> visible_actions<span class="main">)</span> <span class="main">∧</span>
  <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">XoN</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="bound">XoN</span> <span class="bound">q</span>  <span class="main">⟶</span>  <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">q</span> <span class="bound">XoN</span> <span class="bound">p</span><span class="main">)</span> <span class="main">∧</span>

  <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> None <span class="bound">q</span> <span class="main">⟶</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span><span class="main">.</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">p'</span>  <span class="main">⟶</span>  <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="main">(</span><span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> None <span class="bound">q'</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound"><span class="bound">X</span></span> <span class="main">⊆</span> visible_actions<span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>

  <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">X</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span> <span class="main">⟶</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span> <span class="bound">a</span><span class="main">.</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="bound">a</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">a</span> <span class="main">∈</span> <span class="bound">X</span>  <span class="main">⟶</span>  <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="main">(</span><span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="bound">a</span> <span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> 
      <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> None <span class="bound">q'</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span><span class="main">.</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">p'</span>  <span class="main">⟶</span>  <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="main">(</span><span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q'</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span>idle <span class="bound">p</span> <span class="bound">X</span>  <span class="main">⟶</span>  <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> None <span class="bound">q</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span><span class="main">.</span> idle <span class="bound">p</span> <span class="bound">X</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">p'</span><span class="main">)</span>  <span class="main">⟶</span>  <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">q'</span> <span class="main">∧</span> 
      <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>

<span class="comment1">(* This lemma simply translates the definition above into simple implications that are easy-to-use in proofs. It is not relevant for the thesis document. *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> SRB_ruleformat<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹SRB <span class="free">R</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="free">XoN</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">R</span> <span class="free">q</span> <span class="free">XoN</span> <span class="free">p</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> None <span class="free">q</span> <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="main">(</span><span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> None <span class="free">q</span> <span class="main">⟹</span> <span class="free">X</span> <span class="main">⊆</span> visible_actions <span class="main">⟹</span> <span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">a</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="free">a</span> <span class="main">∈</span> <span class="free">X</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="main">(</span><span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">a</span> <span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="main">(</span><span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> idle <span class="free">p</span> <span class="free">X</span> <span class="main">⟹</span> <span class="free">R</span> <span class="free">p</span> None <span class="free">q</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> idle <span class="free">p</span> <span class="free">X</span> <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> SRB_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span><span class="main"><span class="keyword3">+</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Strong Reactive/$X$-Bisimilarity›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Van~Glabbeek differentiates between strong reactive bisimilarity ($(p,q) \in \mathcal{R}$ for an SRB $\mathcal{R}$) and strong $X$-bisimilarity ($(p,X,q) \in \mathcal{R}$ for an SRB $\mathcal{R}$).›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">strongly_reactive_bisimilar</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span> <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool›</span></span> 
  <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="keyword1"><span class="free">↔<span class="hidden">⇩</span><sub>r</sub></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">≡</span> <span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> SRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> None <span class="free"><span class="bound"><span class="entity">q</span></span></span>›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">strongly_X_bisimilar</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span> <span class="main">⇒</span> <span class="tfree">'a</span> set <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool›</span></span> 
  <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span>_ _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="keyword1"><span class="free">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span></span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">≡</span> <span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> SRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">(</span>Some <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span>›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹For the upcoming proofs, it is useful to combine both reactive and $X$-bisimilarity into a single relation.›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">strongly_reactive_or_X_bisimilar</span> 
  <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span> <span class="main">⇒</span> <span class="tfree">'a</span> set option <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">strongly_reactive_or_X_bisimilar</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> 
    <span class="main">≡</span> <span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> SRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span>›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Obviously, then, these relations coincide accordingly.›</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> <span class="free">q</span> <span class="main">⟺</span> strongly_reactive_or_X_bisimilar <span class="free">p</span> None <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> strongly_reactive_bisimilar_def strongly_reactive_or_X_bisimilar_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
<span class="keyword1"><span class="command">corollary</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span><span class="free">X</span> <span class="free">q</span> <span class="main">⟺</span> strongly_reactive_or_X_bisimilar <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> strongly_X_bisimilar_def strongly_reactive_or_X_bisimilar_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>

                                                                
<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Generalised Strong Reactive Bisimulations›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Since GSRBs are defined over the same set as SRBs, the same considerations concerning the type and the clauses of the definition as above hold.›</span></span>

<span class="comment1">― ‹generalised strong reactive bisimulation <span class="antiquoted"><span class="antiquote">@{</span><span class="operator">cite</span> ‹Definition 3› rbs<span class="antiquote">}</span></span>›</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">GSRB</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'s</span> <span class="main">⇒</span> <span class="tfree">'a</span> set option <span class="main">⇒</span> <span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> bool›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">GSRB</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">X</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span>  <span class="main">⟶</span>  <span class="bound">X</span> <span class="main">⊆</span> visible_actions<span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">XoN</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="bound">XoN</span> <span class="bound">q</span>  <span class="main">⟶</span>  <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">q</span> <span class="bound">XoN</span> <span class="bound">p</span><span class="main">)</span> <span class="main">∧</span>

    <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> None <span class="bound">q</span> <span class="main">⟶</span>
      <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span> <span class="bound">a</span><span class="main">.</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="bound">a</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">a</span> <span class="main">∈</span> visible_actions <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span>  <span class="main">⟶</span>
        <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="bound">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> None <span class="bound">q'</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
      <span class="main">(</span><span class="main">∀</span> <span class="bound">X</span> <span class="bound">p'</span><span class="main">.</span> idle <span class="bound">p</span> <span class="bound">X</span> <span class="main">∧</span> <span class="bound">X</span> <span class="main">⊆</span> visible_actions <span class="main">∧</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">p'</span>  <span class="main">⟶</span>  
        <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
    
    <span class="main">(</span><span class="main">∀</span> <span class="bound">p</span> <span class="bound">Y</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">Y</span><span class="main">)</span> <span class="bound">q</span> <span class="main">⟶</span>
      <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span> <span class="bound">a</span><span class="main">.</span> <span class="bound">a</span> <span class="main">∈</span> visible_actions <span class="main">∧</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="bound">a</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">a</span><span class="main">∈</span><span class="bound">Y</span> <span class="main">∨</span> idle <span class="bound">p</span> <span class="bound">Y</span><span class="main">)</span> <span class="main">⟶</span>
        <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="bound">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> None <span class="bound">q'</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
      <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span><span class="main">.</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">p'</span>  <span class="main">⟶</span>  
        <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> <span class="main">(</span>Some <span class="bound">Y</span><span class="main">)</span> <span class="bound">q'</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
      <span class="main">(</span><span class="main">∀</span> <span class="bound">p'</span> <span class="bound">X</span><span class="main">.</span> idle <span class="bound">p</span> <span class="main">(</span><span class="bound">X</span><span class="main">∪</span><span class="bound">Y</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">X</span> <span class="main">⊆</span> visible_actions <span class="main">∧</span> <span class="bound">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">p'</span>  <span class="main">⟶</span>  
        <span class="main">(</span><span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="bound">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p'</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>

<span class="comment1">(* This lemma is not important for the thesis document. *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> GSRB_ruleformat<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹GSRB <span class="free">R</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="free">XoN</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">R</span> <span class="free">q</span> <span class="free">XoN</span> <span class="free">p</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> None <span class="free">q</span> <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">a</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="free">a</span> <span class="main">∈</span> visible_actions <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> None <span class="free">q</span> <span class="main">⟹</span> idle <span class="free">p</span> <span class="free">X</span> <span class="main">⟹</span> <span class="free">X</span> <span class="main">⊆</span> visible_actions <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">Y</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">a</span> <span class="main">∈</span> visible_actions <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">a</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="free">a</span> <span class="main">∈</span> <span class="free">Y</span> <span class="main">∨</span> idle <span class="free">p</span> <span class="free">Y</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">Y</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> <span class="main">(</span>Some <span class="free">Y</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">Y</span><span class="main">)</span> <span class="free">q</span> <span class="main">⟹</span> idle <span class="free">p</span> <span class="main">(</span><span class="free">X</span><span class="main">∪</span><span class="free">Y</span><span class="main">)</span> <span class="main">⟹</span> <span class="free">X</span> <span class="main">⊆</span> visible_actions <span class="main">⟹</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="free">p'</span> <span class="main">⟹</span> <span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="free">p'</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> GSRB_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span><span class="main"><span class="keyword3">+</span></span>
<span class="comment1">(*&gt;*)</span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹GSRBs characterise strong reactive/$X$-bisimilarity›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">cite</span></span> ‹Proposition 4› rbs<span class="antiquote"><span class="antiquote">}</span></span></span></span> reads (notation adapted): \enquote{$p \leftrightarrow_r q$ iff there exists a GSRB $\mathcal{R}$ with $(p,q) \in \mathcal{R}$. Likewise, $p \leftrightarrow_r^X q$ iff there exists a GSRB $\mathcal{R}$ with $(p,X,q) \in \mathcal{R}$.} We shall now replicate the proof of this proposition. First, we prove that each SRB is a GSRB (by showing that each SRB satisfies all clauses of the definition of GSRBs).›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> SRB_is_GSRB<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹SRB <span class="free">R</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹GSRB <span class="free">R</span>›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> GSRB_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">XoN</span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="skolem">XoN</span> <span class="skolem">q</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">q</span> <span class="skolem">XoN</span> <span class="skolem">p</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">x</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> visible_actions›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">a</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>4<span class="main">,</span> 5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">,</span> <span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="var">?X</span> <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="quoted">‹<span class="main"><span class="main">{</span></span><span class="skolem"><span class="skolem">a</span></span><span class="main"><span class="main">}</span></span>›</span></span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">a</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="skolem">p'</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>3<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">X</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>4<span class="main">,</span> 8<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">Y</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">a</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">Y</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">Y</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">a</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span>  <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>7<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="main">{</span><span class="skolem">a</span><span class="main">}</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>4<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">Y</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>6<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">Y</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">X</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="main">(</span><span class="skolem">X</span> <span class="main">∪</span> <span class="skolem">Y</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="main">(</span><span class="skolem">X</span> <span class="main">∪</span> <span class="skolem">Y</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Int_Un_distrib<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>7<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>4<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>8<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Then, we show that each GSRB can be extended to yield an SRB. First, we define this extension. Generally, GSRBs can be smaller than SRBs when proving reactive bisimilarity of processes, because they require triples $(p,X,q)$ only after encountering $t$-transitions, whereas SRBs require these triples for all processes and all environments. These triples (and also some process pairs $(p,q)$ related to environment time-outs, also omitted in GSRBs) are re-added by this extension.
\pagebreak›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">GSRB_extension</span> 
  <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'s</span><span class="main">⇒</span><span class="tfree">'a</span> set option<span class="main">⇒</span><span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span><span class="main">⇒</span><span class="main">(</span><span class="tfree">'s</span><span class="main">⇒</span><span class="tfree">'a</span> set option<span class="main">⇒</span><span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">GSRB_extension</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">≡</span>
    <span class="main">(</span><span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>
    <span class="main">∨</span> <span class="main">(</span>some_visible_subset <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> None <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>
    <span class="main">∨</span> <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="main">=</span> None <span class="main">∨</span> some_visible_subset <span class="free"><span class="bound"><span class="entity">XoN</span></span></span><span class="main">)</span> 
      <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">Y</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">(</span>Some <span class="bound">Y</span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">∧</span> idle <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="bound">Y</span><span class="main">)</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Now we show that this extension does, in fact, yield an SRB (again, by showing that all clauses of the definition of SRBs are satisfied).›</span></span>

<span class="comment1">(* This lemma is required for the next proof, but it is not important for the outline document. *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> GSRB_preserves_idleness<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> 
    <span class="quoted"><span class="quoted">‹GSRB <span class="free">R</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span>›</span></span>
    <span class="quoted"><span class="quoted">‹idle <span class="free">p</span> <span class="free">X</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
    <span class="quoted"><span class="quoted">‹idle <span class="free">q</span> <span class="free">X</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> idle <span class="free">q</span> <span class="free">X</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹initial_actions <span class="free">q</span> <span class="main">∩</span> <span class="main">(</span><span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span><span class="main">)</span> <span class="main">≠</span> <span class="main">∅</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">a</span><span class="main">.</span> <span class="bound">a</span> <span class="main">∈</span> initial_actions <span class="free">q</span> <span class="main">∧</span> <span class="bound">a</span> <span class="main">∈</span> <span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> initial_actions <span class="free">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">q'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> initial_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">q</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">p</span>›</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> GSRB_def<span class="main">)</span>

  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">q'</span>›</span></span>
    <span class="keyword1"><span class="command">from</span></span> GSRB_ruleformat<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">q</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">p</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="free">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">q'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span>›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="skolem">q'</span>›</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="free">q</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">p</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="free">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">p'</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>6<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>

  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> initial_actions <span class="free">q</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> initial_actions <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> initial_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="free">X</span> <span class="main">∪</span> <span class="main">{</span><span class="free">τ</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> idle <span class="free">p</span> <span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">lemma</span></span> GSRB_extension_is_SRB<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span>
    <span class="quoted"><span class="quoted">‹GSRB <span class="free">R</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">‹SRB <span class="main">(</span>GSRB_extension <span class="free">R</span><span class="main">)</span>›</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">‹SRB <span class="var">?R_ext</span>›</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">unfolding</span></span> SRB_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">XoN</span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="skolem">XoN</span> <span class="skolem">q</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">q</span> <span class="skolem">XoN</span> <span class="skolem">p</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">q</span> <span class="skolem">XoN</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms GSRB_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹some_visible_subset <span class="skolem">XoN</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">q</span> None <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms GSRB_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Y</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">q</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms GSRB_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">q</span> <span class="skolem">Y</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> GSRB_preserves_idleness<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">from</span></span> 3 <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">q</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">p</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">q</span> <span class="skolem">Y</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">x</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> visible_actions›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R_ext</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> None <span class="skolem">q'</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>3<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> lts_timeout_axioms <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">thm</span></span> GSRB_ruleformat<span class="main">(</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">,</span> <span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="var">?a</span><span class="main"><span class="main">=</span></span><span class="quoted"><span class="free">τ</span></span><span class="main">]</span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> initial_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">X</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹some_visible_subset <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> 3 <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">a</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R_ext</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>1<span class="main">,</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>3<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Y</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> 3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span>
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>2<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> 3 <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R_ext</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>6<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>3<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Y</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> 3<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> 
      <span class="keyword1"><span class="command">using</span></span> initial_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R_ext</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R_ext</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> GSRB_extension_def
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> 1
    <span class="keyword1"><span class="command">from</span></span> 1<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="main">(</span><span class="skolem">X</span> <span class="main">∪</span> <span class="skolem">X</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">from</span></span> GSRB_ruleformat<span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms 1<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">from</span></span> GSRB_ruleformat<span class="main">(</span>7<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms 1<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="main">(</span><span class="skolem">X</span> <span class="main">∪</span> <span class="skolem">X</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> 1<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 2
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> GSRB_ruleformat<span class="main">(</span>4<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> option.inject<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> 3
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Y</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="main">(</span><span class="skolem">X</span> <span class="main">∪</span> <span class="skolem">Y</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> bot_eq_sup_iff inf_sup_distrib1<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> 3<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> GSRB_ruleformat<span class="main">(</span>7<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">Y</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="main">(</span><span class="skolem">X</span> <span class="main">∪</span> <span class="skolem">Y</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> 3<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Finally, we can conclude the following:›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> GSRB_whenever_SRB<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> GSRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free">p</span> <span class="free">XoN</span> <span class="free">q</span><span class="main">)</span>  <span class="main">⟺</span>  <span class="main">(</span><span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> SRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free">p</span> <span class="free">XoN</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> GSRB_extension_def GSRB_extension_is_SRB SRB_is_GSRB<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹This, now, directly implies that GSRBs do charactarise strong reactive/$X$-bisimilarity.›</span></span>

<span class="keyword1"><span class="command">proposition</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> GSRBs_characterise_strong_reactive_bisimilarity<span class="main">:</span>
  <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> <span class="free">q</span> <span class="main">⟺</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> GSRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free">p</span> None <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> GSRB_whenever_SRB strongly_reactive_bisimilar_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">proposition</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> GSRBs_characterise_strong_X_bisimilarity<span class="main">:</span>
  <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span><span class="free">X</span> <span class="free">q</span> <span class="main">⟺</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">R</span><span class="main">.</span> GSRB <span class="bound">R</span> <span class="main">∧</span> <span class="bound">R</span> <span class="free">p</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> GSRB_whenever_SRB strongly_X_bisimilar_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of <span class="antiquoted"><span class="raw_text"><span class="operator">‹</span>context lts_timeout›</span></span>›</span>


<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹As a little meta-comment, I would like to point out that van~Glabbeek's proof spans a total of five lines (\enquote{Clearly, \textelp{}}, \enquote{It is straightforward to check \textelp{}}), whereas the Isabelle proof takes up around 250 lines of code. This just goes to show that for things which are clear and straightforward for humans, it might require quite some effort to \enquote{explain} them to a computer.
\pagebreak›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of ‹theory››</span>
<span class="comment1">(*&gt;*)</span></pre>
</body>

</html>
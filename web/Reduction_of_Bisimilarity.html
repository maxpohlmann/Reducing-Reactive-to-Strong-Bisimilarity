<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Reduction_of_Bisimilarity</title>
</head>


<body>
<div class="head">
<h1>Theory Reduction_of_Bisimilarity</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> Reduction_of_Bisimilarity
  <span class="keyword2"><span class="keyword">imports</span></span>
  <a href="Mapping_for_Transition_Systems.html">Mapping_for_Transition_Systems</a>
  <a href="Reactive_Bisimilarity.html">Reactive_Bisimilarity</a>
  <a href="Strong_Bisimilarity.html">Strong_Bisimilarity</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Reduction of Bisimilarity›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\label{sec:reduction_bisimilarity}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹The main result of this section will be that two processes $p$ and $q$ of an \LTSt{} $\mathbb{T}$ are strongly reactive bisimilar (strongly $X$-bisimilar) iff the corresponding processes $\vartheta(p)$ and $\vartheta(q)$ ($\vartheta_X(p)$ and $\vartheta_X(q)$) of $\mathbb{T}_\vartheta$ are strongly bisimilar. 

We show the $\Longrightarrow$-direction first. For an SRB $\mathcal{R}$, let
$$\mathcal{S} = \{ (\vartheta(p), \vartheta(q)) \mid (p, q) \in \mathcal{R} \} \cup \{ (\vartheta_X(p), \vartheta_X(q)) \mid (p, X, q) \in \mathcal{R} \}.$$
We can prove that $\mathcal{S}$ is an SB, by showing that the mapping satiesfies all clauses of the definition of SBs, using the fact that $\mathcal{R}$ is an SRB as well as the rules and generation lemmas for $\rightarrow_\vartheta$. Hence, the existence of an SRB $\mathcal{R}$ with $(p, q) \in \mathcal{R}$ implies the existence of an SB $\mathcal{S}$ with $(\vartheta(p), \vartheta(q)) \in \mathcal{S}$ (and similarly for $\vartheta_X$), so strong reactive/$X$-bisimilarity in $\mathbb{T}$ implies strong bisimilarity in $\mathbb{T}_\vartheta$.

Next, we show the $\Longleftarrow$-direction. Let
$$\mathcal{R} = \{ (p, q) \mid \vartheta(p) \leftrightarrow \vartheta(q) \} \cup \{ (p, X, q) \mid \vartheta_X(p) \leftrightarrow \vartheta_X(q) \}.$$
We can prove that $\mathcal{R}$ is an SRB, again, by showing that all clauses of the definition are satisfied. Hence, strong bisimilarity of $\vartheta(p)$ and $\vartheta(q)$ implies the existence of an SRB $\mathcal{R}$ with $(p, q) \in \mathcal{R}$ (and similarly for $\vartheta_X$), so strong bisimilarity in $\mathbb{T}_\vartheta$ implies strong reactive/$X$-bisimilarity in $\mathbb{T}$.

Thus, we have that strong reactive/$X$-bisimilarity in $\mathbb{T}$ corresponds to strong bisimilarity in $\mathbb{T}_\vartheta$.›</span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Isabelle›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We begin by \emph{interpreting} our transition mapping <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>tran_theta›</span></span></span></span> as an <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts›</span></span></span></span> and call it <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_theta›</span></span></span></span>. Therefore, we are handling two separate LTSs: the \LTSt{} $\mathbb{T}$ given by the local <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>context lts_timeout_mappable›</span></span></span></span>, and the LTS $\mathbb{T}_\vartheta$ given by the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>interpretation lts_theta›</span></span></span></span>.
When referring to definitions involving the transition relation of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_theta›</span></span></span></span>, we have to prefix them, e.g.\@ <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_theta.SB›</span></span></span></span> for the definition of strong bisimulations using <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⟼<span class="hidden">⇧</span><sup>θ</sup>›</span></span></span></span> instead of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⟼›</span></span></span></span>.

By default, <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>interpretation›</span></span></span></span>s do not import special notation, so we reassign strong bisimilarity notation <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>↔›</span></span></span></span> to <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts_theta›</span></span></span></span>, since we do not care about strong bisimilarity in $\mathbb{T}$.›</span></span>

<span class="keyword1"><span class="command">context</span></span> lts_timeout_mappable <span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">interpretation</span></span> lts_theta<span class="main">:</span> lts <span class="quoted">tran_theta</span> <span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">no_notation</span></span> local.strongly_bisimilar <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔</span> _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> lts_theta.strongly_bisimilar <span class="main">(</span><span class="quoted">‹_ <span class="keyword1">↔</span> _›</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 70<span class="main">)</span>


<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We can now formalise the proof as described above.›</span></span>

<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹If \dots{} (\boldmath{$\Longrightarrow$})›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">SRB_mapping</span> <span class="comment1">― ‹$\mathcal{S}$›</span> 
  <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'s</span><span class="main">⇒</span><span class="tfree">'a</span> set option<span class="main">⇒</span><span class="tfree">'s</span> <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'ss</span><span class="main">⇒</span><span class="tfree">'ss</span> <span class="main">⇒</span> bool<span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">SRB_mapping</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">≡</span> 
    <span class="main">(</span><span class="main">∃</span> <span class="bound">p</span> <span class="bound">q</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> None <span class="bound">q</span><span class="main">)</span> <span class="main">∨</span>
    <span class="main">(</span><span class="main">∃</span> <span class="bound">p</span> <span class="bound">q</span> <span class="bound">X</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> SRB_mapping_is_SB<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹SRB <span class="free">R</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹lts_theta.SB <span class="main">(</span>SRB_mapping <span class="free">R</span><span class="main">)</span>›</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">‹lts_theta.SB <span class="var">?S</span>›</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span> <span class="skolem">Q</span> <span class="skolem">P'</span> <span class="skolem">a</span>
    <span class="keyword3"><span class="command">assume</span></span>
      <span class="quoted"><span class="quoted">‹<span class="var">?S</span> <span class="skolem">P</span> <span class="skolem">Q</span>›</span></span>
      <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q'</span><span class="main">.</span> <span class="var">?S</span> <span class="skolem">P'</span> <span class="bound">Q'</span> <span class="main">∧</span> <span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="bound">Q'</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?S</span> <span class="skolem">P</span> <span class="skolem">Q</span>›</span></span> <span class="keyword1"><span class="command">unfolding</span></span> SRB_mapping_def
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="bound">q</span><span class="main">.</span> <span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="bound">p</span> None <span class="bound">q</span>›</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span>
        <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∃</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span> <span class="main">∧</span> <span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">X</span> <span class="main">⊆</span> visible_actions<span class="main">)</span> <span class="main">∨</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">p'</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> generation_triggered_transitions <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q'</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="bound">q</span><span class="main">.</span> <span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">Q'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="bound">p</span> None <span class="bound">q</span><span class="main">)</span> 
        <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="bound">q</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">Q'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="bound">Q'</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">auto</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">goal_cases</span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>1 <span class="skolem">X</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">X</span><span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> 
        <span class="keyword1"><span class="command">using</span></span> env_stabilise <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
    
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>4<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>
    
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">X</span><span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="skolem">X</span><span class="main"><span class="free">]</span></span>›</span></span>
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>2 <span class="skolem">p'</span><span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="free">R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>3<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> 2<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"2"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> generation_triggered_tau SRB_ruleformat<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> triggered_tau<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    
    <span class="keyword1"><span class="command">next</span></span>
    
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="bound">q</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span>›</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">q</span></span> <span class="skolem"><span class="skolem">X</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">t_ε</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">p'</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> generation_stable_transitions <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">t_ε</span> <span class="main">∨</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∨</span> <span class="skolem">a</span> <span class="main">=</span> <span class="free">t</span> <span class="main">∨</span> <span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> visible_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Q'</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="bound">q</span><span class="main">.</span> <span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">Q'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="bound">p</span> None <span class="bound">q</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="bound">q</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">Q'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="bound">q</span><span class="main">)</span> <span class="main">∧</span> <span class="free">R</span> <span class="bound">p</span> <span class="main">(</span>Some <span class="bound">X</span><span class="main">)</span> <span class="bound">q</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="bound">Q'</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">t_ε</span>›</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_env_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span><span class="main"><span class="keyword3">+</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">q</span> <span class="skolem">X</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> assms GSRB_preserves_idleness SRB_is_GSRB <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> env_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>7<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">t_ε</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">τ</span>›</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_stable_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>6<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q'</span><span class="main">)</span>›</span></span> 
          <span class="keyword1"><span class="command">using</span></span> stable_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">t</span>›</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹ <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_sys_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>8<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">q</span> <span class="skolem">X</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> assms GSRB_preserves_idleness SRB_is_GSRB <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">q</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q'</span><span class="main">)</span>›</span></span> 
          <span class="keyword1"><span class="command">using</span></span> sys_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">=</span> <span class="free">t</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword1"><span class="command">thm</span></span> SRB_ruleformat
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> visible_actions›</span></span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> 
          <span class="keyword1"><span class="command">using</span></span> generation_tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> None <span class="skolem">q'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> SRB_ruleformat<span class="main">(</span>5<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="keyword1">θ(</span><span class="skolem">q'</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">R</span> <span class="skolem">p'</span> None <span class="skolem">q'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">note</span></span> SB_property_half <span class="main">=</span> this

  <span class="keyword1"><span class="command">have</span></span> SRB_mapping_symmetry<span class="main">:</span> 
    <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> SRB <span class="free">R</span> <span class="main">∧</span> <span class="var">?S</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="main">⟹</span> <span class="var">?S</span> <span class="bound">Q</span> <span class="bound">P</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms SRB_mapping_def SRB_ruleformat<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span><span class="main">)</span>

  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹lts_theta.SB <span class="var">?S</span>›</span></span> <span class="keyword1"><span class="command">unfolding</span></span> lts_theta.SB_def
    <span class="keyword1"><span class="command">using</span></span> assms SB_property_half SRB_mapping_symmetry <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> srby_implies_sby<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> <span class="free">q</span>›</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="free">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> SRB_mapping_def SRB_mapping_is_SB lts_theta.strongly_bisimilar_def strongly_reactive_bisimilar_def<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> sxby_implies_sby<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span><span class="free">X</span> <span class="free">q</span>›</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> SRB_mapping_def SRB_mapping_is_SB strongly_X_bisimilar_def lts_theta.strongly_bisimilar_def<span class="main">)</span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹\dots{} and only if (\boldmath{$\Longleftarrow$})›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">strong_bisimilarity_mapping</span> <span class="comment1">― ‹$\mathcal{R}$›</span>
  <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'s</span><span class="main">⇒</span><span class="tfree">'a</span> set option<span class="main">⇒</span><span class="tfree">'s</span> <span class="main">⇒</span> bool›</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">strong_bisimilarity_mapping</span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> 
    <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="main">=</span> None <span class="main">∧</span> <span class="main">(</span><span class="keyword1">θ(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">↔</span> <span class="main">(</span><span class="keyword1">θ(</span><span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∨</span>
    <span class="main">(</span><span class="main">∃</span> <span class="bound">X</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">XoN</span></span></span> <span class="main">=</span> Some <span class="bound">X</span> <span class="main">∧</span> <span class="bound">X</span> <span class="main">⊆</span> visible_actions <span class="main">∧</span> 
     <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="bound">X</span><span class="main">](</span><span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> strong_bisimilarity_mapping_is_SRB<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹SRB strong_bisimilarity_mapping›</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">‹SRB <span class="var">?R</span>›</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">unfolding</span></span> SRB_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">XoN</span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="skolem">XoN</span> <span class="skolem">q</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">q</span> <span class="skolem">XoN</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_symm <span class="keyword1"><span class="command">unfolding</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">x</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">unfolding</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span>

  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span><span class="main">)</span> <span class="main">↔</span> <span class="main">(</span><span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> triggered_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="skolem">Q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_step <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> generation_triggered_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="bound">q'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">q</span> <span class="skolem">X</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">X</span><span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> env_stabilise<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">X</span><span class="main"><span class="free">]</span></span> <span class="skolem">Q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_step<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">X</span><span class="main"><span class="free">]</span></span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> generation_env_stabilise injectivity_theta<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">p'</span> <span class="skolem">a</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">Q'</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="bound">Q'</span> <span class="main">∧</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="bound">Q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_step<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">a</span> <span class="skolem">Q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="skolem">Q'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">q'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_tran_visible <span class="quoted"><span class="quoted">‹<span class="skolem">a</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">a</span> <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R</span> <span class="skolem">p'</span> None <span class="bound">q'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="skolem">p'</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> stable_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">Q'</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="bound">Q'</span> <span class="main">∧</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="bound">Q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_step<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="skolem">Q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="skolem">Q'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_stable_tau <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> env_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">Q'</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="bound">Q'</span> <span class="main">∧</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="bound">Q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_step<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="skolem">Q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Q'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_env_timeout<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="skolem">Q'</span>›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">..</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> None <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="skolem">X</span> <span class="skolem">q</span> <span class="skolem">p'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?R</span> <span class="skolem">p</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="skolem">q</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="skolem">p'</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> sys_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">Q'</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="bound">Q'</span> <span class="main">∧</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="bound">Q'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lts_theta.strongly_bisimilar_step<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">q</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="skolem">Q'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">q'</span><span class="main">.</span> <span class="skolem">Q'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="bound">q'</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="bound">q'</span> <span class="main">∧</span> idle <span class="skolem">q</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_sys_timeout <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">↔</span> <span class="skolem">Q'</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q'</span><span class="main">.</span> <span class="skolem">q</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="bound">q'</span> <span class="main">∧</span> <span class="var">?R</span> <span class="skolem">p'</span> <span class="main">(</span>Some <span class="skolem">X</span><span class="main">)</span> <span class="bound">q'</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> sby_implies_srby<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="free">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="free">q</span><span class="main">)</span>›</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms strong_bisimilarity_mapping_is_SRB
  <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def strongly_reactive_bisimilar_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> sby_implies_sxby<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span><span class="free">X</span> <span class="free">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> assms strong_bisimilarity_mapping_is_SRB
  <span class="keyword1"><span class="command">using</span></span> strong_bisimilarity_mapping_def strongly_X_bisimilar_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We need to include the assumption <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>X ⊆ visible_actions›</span></span></span></span>, since for <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>¬ X ⊆ visible_actions›</span></span></span></span>, <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>θ[X](p)›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>θ[X](q)›</span></span></span></span> might be identical (since we do not require injectivity for that subset of the domain), so <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>θ[X](p) ↔ θ[X](q)›</span></span></span></span> would be true, whereas <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ↔<span class="hidden">⇩</span><sub>r</sub><span class="hidden">⇧</span><sup>X</sup> q›</span></span></span></span> would be false (since <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>X ⊆ visible_actions›</span></span></span></span> is part of the definition of SRBs).›</span></span>


<span class="keyword1"><span class="command">subsubsection</span></span> <span class="quoted"><span class="plain_text">‹Iff (\boldmath{$\Longleftrightarrow$})›</span></span>

<span class="keyword1"><span class="command">theorem</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> strongly_reactive_bisim_iff_triggered_strongly_bisim<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub></span> <span class="free">q</span>  <span class="main">⟺</span>  <span class="keyword1">θ(</span><span class="free">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ(</span><span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> sby_implies_srby srby_implies_sby <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>

<span class="keyword1"><span class="command">theorem</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> strongly_X_bisim_iff_stable_strongly_bisim<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="keyword1">↔<span class="hidden">⇩</span><sub>r</sub>⇧</span><span class="free">X</span> <span class="free">q</span>  <span class="main">⟺</span>  <span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">p</span><span class="main">)</span> <span class="main">↔</span> <span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> sxby_implies_sby sby_implies_sxby assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>


<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of <span class="antiquoted"><span class="raw_text"><span class="operator">‹</span>context lts_timeout_mappable›</span></span>›</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of ‹theory››</span>
<span class="comment1">(*&gt;*)</span></pre>
</body>

</html>
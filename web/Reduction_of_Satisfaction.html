<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Reduction_of_Satisfaction</title>
</head>


<body>
<div class="head">
<h1>Theory Reduction_of_Satisfaction</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> Reduction_of_Satisfaction
  <span class="keyword2"><span class="keyword">imports</span></span>
    <a href="Mapping_for_Formulas.html">Mapping_for_Formulas</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Reduction of Formula Satisfaction›</span></span>
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\label{sec:reduction_satisfaction}›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We will show that, for a process $p$ of an \LTSt{} and a formula $\varphi$ of \HMLt{}, we have $p \vDash \varphi \iff \vartheta(p) \vDash \sigma(\varphi)$ and $p \vDash_X \varphi \iff \vartheta_X(p) \vDash \sigma(\varphi)$. The proof is rather straightforward: we use induction over \HMLt{} formulas and show that, for each case, the semantics given by van~Glabbeek's satisfaction relations and those given by the mappings $\sigma$ and $\vartheta$/$\vartheta_X$ coincide. Due to the relative complexity of the mapping and the satisfaction relations, the proof is quite tedious, however.
\vspace{-.3cm}›</span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">‹Isabelle›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹\vspace{-.4cm}
Similarly to the formalisations in \cref{sec:reduction_bisimilarity}, we begin by interpreting our transition mapping <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>tran_theta›</span></span></span></span> as an <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>lts›</span></span></span></span> and reassigning notation appropriately (we only care about HML formula satisfaction for $\mathbb{T}_\vartheta$, not $\mathbb{T}$).›</span></span>

<span class="keyword1"><span class="command">context</span></span> lts_timeout_mappable <span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">interpretation</span></span> lts_theta<span class="main">:</span> lts <span class="quoted">tran_theta</span> <span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">no_notation</span></span> local.HML_sat <span class="main">(</span><span class="quoted">"_ <span class="keyword1">⊨</span> _"</span> <span class="main">[</span>50<span class="main">,</span> 50<span class="main">]</span> 50<span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> lts_theta.HML_sat <span class="main">(</span><span class="quoted">"_ <span class="keyword1">⊨</span> _"</span> <span class="main">[</span>50<span class="main">,</span> 50<span class="main">]</span> 50<span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹We show <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>p ⊫?[XoN] φ  ⟺  θ?[XoN](p) ⊨ σ(φ)›</span></span></span></span> by induction over <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>φ›</span></span></span></span>. By using those terms for formula satisfaction and process mappings that handle both triggered and stable environments, we can handle both situations simultaneously, which is required due to the interdependence of $\vDash$ and $\vDash_X$. However, this requires us to consider four cases (each combination of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⊫?[XoN<span class="hidden">⇩</span><sub>1</sub>]›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>θ?[XoN<span class="hidden">⇩</span><sub>2</sub>]›</span></span></span></span> for <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>XoN<span class="hidden">⇩</span><sub>1</sub>, XoN<span class="hidden">⇩</span><sub>2</sub> ∈ {None, Some X}›</span></span></span></span>%
\footnote{Once again, we only consider cases where <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>X ⊆ visible_actions›</span></span></span></span>.}%
) per inductive case for <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>φ›</span></span></span></span>. Together with the many disjunctive clauses in the mapping, a large number of cases needs to be considered, leading to a proof spanning roughly 350 lines of Isabelle code.›</span></span>

<span class="comment1">(* These lemmas are not important for the thesis document. *)</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> sat_poss_alpha_not_special<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> 
    <span class="quoted"><span class="quoted">‹no_special_action <span class="free">α</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">⊨</span> <span class="free">φ'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">φ'</span> <span class="main">∈</span> <span class="main">{</span>HML_poss <span class="free">α</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">,</span> 
          HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">α</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">,</span>
          HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">α</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">‹<span class="free">φ'</span> <span class="main">∈</span> <span class="var">?disj</span>›</span></span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="free">α</span> <span class="free">φ</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹cin <span class="free">φ'</span> <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.abs_eq eq_onp_same_args<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">⊨</span> <span class="main">(</span>HML_disj <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HML_sat_disj <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> HMt_mapping.simps<span class="main">(</span>4<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> sat_time_forward<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">⊨</span> <span class="free">φ'</span>›</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">φ'</span> <span class="main">∈</span> <span class="main">{</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">,</span>
          HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">‹<span class="free">φ'</span> <span class="main">∈</span> <span class="var">?disj</span>›</span></span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">shows</span></span>
    <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="free">X</span> <span class="free">φ</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹cin <span class="free">φ'</span> <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.abs_eq eq_onp_same_args<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">P</span> <span class="main">⊨</span> <span class="main">(</span>HML_disj <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HML_sat_disj <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> HMt_mapping.simps<span class="main">(</span>6<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> sat_time_backward<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="free">Y</span> <span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
    <span class="quoted"><span class="quoted">‹<span class="free">Y</span> <span class="main">⊆</span> visible_actions <span class="main">∧</span> <span class="main">(</span><span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span> <span class="main">∨</span>
    <span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">Y</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> <span class="free">Y</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> HML_false›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">using</span></span> lts_theta.HML_sat_false <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?disj</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">,</span> 
    HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> HML_disj <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> HMt_mapping.simps<span class="main">(</span>6<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="free">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">φ'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹cin <span class="skolem">φ'</span> <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> <span class="skolem">φ'</span>›</span></span> 
    <span class="keyword1"><span class="command">using</span></span> lts_theta.HML_sat_disj <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹cin <span class="skolem">φ'</span> <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">φ'</span> <span class="main">∈</span> <span class="var">?disj</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.abs_eq eq_onp_same_args<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> <span class="skolem">φ'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> triggered_env_cannot_timeout<span class="main">:</span> 
  <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">φ</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">θ(</span><span class="free">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t_ε</span> <span class="bound">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_triggered_transitions
  <span class="keyword1"><span class="command">using</span></span> distinctness_special_actions<span class="main">(</span>2<span class="main">,</span>6<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>

<span class="keyword1"><span class="command">lemma</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> unimportant›</span></span></span> stable_env_cannot_stabilise<span class="main">:</span> 
  <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">φ</span><span class="main">.</span> <span class="main">¬</span> <span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="free">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="bound">φ</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> generation_stable_transitions distinctness_special_actions<span class="main">(</span>6<span class="main">)</span> 
    no_epsilon_in_tran<span class="main">(</span>1<span class="main">)</span> lts_theta.HML_sat.simps<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">lemma</span></span> HMLt_sat_iff_HML_sat<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="free">XoN</span> <span class="main">=</span> None <span class="main">∨</span> <span class="main">(</span><span class="free">XoN</span> <span class="main">=</span> <span class="main">(</span>Some <span class="free">X</span><span class="main">)</span> <span class="main">∧</span> <span class="free">X</span> <span class="main">⊆</span> visible_actions<span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫?[</span><span class="free">XoN</span><span class="main">]</span> <span class="free">φ</span>  <span class="main">⟺</span>  <span class="keyword1"><span class="free">θ?[</span></span><span class="free">XoN</span><span class="main"><span class="free">](</span></span><span class="free">p</span><span class="main"><span class="free">)</span></span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">φ</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">p</span></span> <span class="quoted"><span class="free">XoN</span></span> <span class="quoted"><span class="free">X</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_conj <span class="skolem">Φ</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> HMLt_conj.prems <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">safe</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_conj <span class="skolem">Φ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="skolem">p</span> <span class="main">⊫</span> <span class="bound">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> HMLt_conj.hyps <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.rep_eq<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_conj <span class="skolem">Φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_conj <span class="skolem">Φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_conj <span class="main">(</span>cimage <span class="main">(</span><span class="main">λ</span> <span class="bound">φ</span><span class="main">.</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span><span class="main">)</span> <span class="skolem">Φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> cin <span class="bound">φ</span> <span class="main">(</span>cimage <span class="main">(</span><span class="main">λ</span> <span class="bound">φ</span><span class="main">.</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span><span class="main">)</span> <span class="skolem">Φ</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="bound">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> HMLt_conj.hyps <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="skolem">p</span> <span class="main">⊫</span> <span class="bound">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.rep_eq<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_conj <span class="skolem">Φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">X</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_conj <span class="skolem">Φ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="bound">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> HMLt_conj.hyps <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.rep_eq<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="main">(</span><span class="keyword1">σ(</span>HMLt_conj <span class="skolem">Φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">X</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_conj <span class="skolem">Φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_conj <span class="main">(</span>cimage <span class="main">(</span><span class="main">λ</span> <span class="bound">φ</span><span class="main">.</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span><span class="main">)</span> <span class="skolem">Φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> cin <span class="bound">φ</span> <span class="main">(</span>cimage <span class="main">(</span><span class="main">λ</span> <span class="bound">φ</span><span class="main">.</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span><span class="main">)</span> <span class="skolem">Φ</span><span class="main">)</span> <span class="main">⟶</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="bound">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="bound">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> HMLt_conj.hyps <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">φ</span><span class="main">.</span> <span class="bound">φ</span> <span class="keyword1">∈<span class="hidden">⇩</span><sub>c</sub></span> <span class="skolem">Φ</span> <span class="main">⟶</span> <span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="bound">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cin.rep_eq<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_conj <span class="skolem">Φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_neg <span class="skolem">φ</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> HMLt_poss.prems <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">safe</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span> <span class="main">∧</span> <span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> 
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">safe</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span> <span class="main">∧</span> <span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> triggered_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">τ</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="free">τ</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span> 
        <span class="keyword1"><span class="command">using</span></span> no_epsilon_in_tran visible_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> env_stabilise <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span> <span class="main">∧</span> <span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> 
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> 
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span>  <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> sat_poss_alpha_not_special visible_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">τ</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span>  <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> generation_triggered_tau lts_theta.HML_sat.simps<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> HMLt_poss.hyps <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">t</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">t_ε</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">t</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">t_ε</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_false›</span></span> <span class="keyword1"><span class="command">using</span></span> HMt_mapping.simps<span class="main">(</span>5<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span> 
      <span class="keyword1"><span class="command">with</span></span> lts_theta.HML_sat_false <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹no_special_action <span class="skolem">α</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?disj</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">,</span> 
                  HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">,</span>
                  HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹countable <span class="var">?disj</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_disj <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">φ'</span> <span class="main">∈</span> <span class="var">?disj</span><span class="main">.</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="bound">φ'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lts_theta.HML_sat_disj <span class="quoted"><span class="quoted">‹countable <span class="var">?disj</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> cin.abs_eq eq_onp_same_args<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">safe</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_triggered_transitions <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_env_stabilise injectivity_theta<span class="main">(</span>2<span class="main">)</span> lts_theta.HML_sat.simps<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_stable_transitions <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span>
        <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="skolem">P'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">using</span></span> generation_triggered_transitions distinctness_special_actions <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span><span class="main">)</span> 
      <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="skolem">φ</span><span class="main">)</span> 
      <span class="main">∨</span> idle <span class="skolem">p</span> <span class="skolem">X</span> <span class="main">∧</span> <span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">elim</span> disjE<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> no_epsilon_in_tran visible_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insertCI sat_poss_alpha_not_special<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span>  <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> stable_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">τ</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> HMt_mapping.simps<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span> <span class="main">∧</span> <span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>

      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> env_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> env_stabilise <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> 
        <span class="keyword1"><span class="command">using</span></span> initial_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> no_epsilon_in_tran visible_actions_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insertCI sat_poss_alpha_not_special<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> prem<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>

    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> prem <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">τ</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">P'</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">τ</span> <span class="bound">P'</span> <span class="main">∧</span> <span class="bound">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> generation_stable_tau <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> 
        <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">τ</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">τ</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">t</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">t_ε</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">=</span> <span class="free">t</span> <span class="main">∨</span> <span class="skolem">α</span> <span class="main">=</span> <span class="free">t_ε</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">=</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> prem <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_false›</span></span> <span class="keyword1"><span class="command">using</span></span> HMt_mapping.simps<span class="main">(</span>5<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
      <span class="keyword1"><span class="command">with</span></span> lts_theta.HML_sat_false <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?disj</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">,</span> 
        HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">,</span>
        HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹countable <span class="var">?disj</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword3"><span class="command">assume</span></span> α_not_special<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">≠</span> <span class="free">τ</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t</span> <span class="main">∧</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="free">t_ε</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">X</span><span class="main">.</span> <span class="skolem">α</span> <span class="main">≠</span> <span class="keyword1"><span class="free">ε[</span></span><span class="bound">X</span><span class="main"><span class="free">]</span></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">with</span></span> prem <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_disj <span class="main">(</span>acset <span class="var">?disj</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMt_mapping.simps<span class="main">(</span>5<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">φ'</span> <span class="main">∈</span> <span class="var">?disj</span><span class="main">.</span> <span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="bound">φ'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lts_theta.HML_sat_disj <span class="quoted"><span class="quoted">‹countable <span class="var">?disj</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> cin.abs_eq eq_onp_same_args<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_stable_transitions α_not_special <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span> <span class="skolem">P'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> generation_env_stabilise injectivity_theta<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span>visible_actions<span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_env_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="skolem">α</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_env_stabilise <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> injectivity_theta<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> lts_theta.HML_sat.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> α_not_special <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">using</span></span> generation_stable_transitions <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span>visible_actions<span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="skolem">α</span> <span class="skolem">P'</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> generation_tran_visible <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ(</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫</span> <span class="skolem">φ</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> HMLt_poss.hyps <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="skolem">α</span> <span class="skolem">p'</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">α</span> <span class="main">∈</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_poss <span class="skolem">α</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>

  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> sat_time_backward triggered_env_cannot_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> generation_env_stabilise injectivity_theta<span class="main">(</span>2<span class="main">)</span> lts_theta.HML_sat.simps<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="skolem">P'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="skolem">P'</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="skolem">p'</span>›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> generation_sys_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">=</span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">P'</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> HMLt_time.hyps <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">note</span></span> case2 <span class="main">=</span> this

  <span class="keyword1"><span class="command">from</span></span> HMLt_time.prems <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">safe</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_time.hyps <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> sys_timeout<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span>  <span class="skolem">p'</span>›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> env_stabilise<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> sat_time_forward<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">⊫</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> case2 <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span>

    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p'</span><span class="main">.</span> <span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="bound">p'</span> <span class="main">∧</span> <span class="bound">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">p'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> env_timeout<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> env_stabilise<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">.</span></span>

    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p'</span> <span class="main">⊫[</span><span class="skolem">Y</span><span class="main">]</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> HMLt_time.hyps <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main"><span class="free">⟼</span></span><span class="free">t</span> <span class="skolem">p'</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t</span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p'</span><span class="main">)</span>›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> sys_timeout<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span> <span class="keyword1">θ[</span><span class="skolem">Y</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="keyword1">⟼<span class="hidden">⇧</span><sup>θ</sup></span><span class="free">t_ε</span> <span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="free">t_ε</span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> sat_time_forward<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ[</span><span class="skolem">X</span><span class="main">](</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="free">t_ε</span> <span class="main">(</span>HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> sat_time_backward stable_env_cannot_stabilise <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> HML_poss <span class="main">(</span><span class="keyword1"><span class="free">ε[</span></span><span class="skolem">Y</span><span class="main"><span class="free">]</span></span><span class="main">)</span> <span class="main">(</span>HML_poss <span class="free">t</span> <span class="keyword1">σ(</span><span class="skolem">φ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> 
      <span class="keyword1"><span class="command">using</span></span> generation_env_timeout <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">θ(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span>HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> sat_time_forward<span class="main">[</span><span class="operator">OF</span> <span class="quoted"><span class="quoted">‹<span class="skolem">Y</span> <span class="main">⊆</span> visible_actions›</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> case2<span class="main">[</span><span class="operator">OF</span> this<span class="main">]</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">.</span></span>

    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">⊫[</span><span class="skolem">X</span><span class="main">]</span> HMLt_time <span class="skolem">Y</span> <span class="skolem">φ</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">X</span> <span class="main">⊆</span> visible_actions›</span></span> <span class="quoted"><span class="quoted">‹idle <span class="skolem">p</span> <span class="skolem">X</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Theorems using nicer notation are immediate consequences of this lemma.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> HMLt_sat_triggered_iff_triggered_env_HML_sat<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫</span> <span class="free">φ</span>  <span class="main">⟺</span>  <span class="keyword1">θ(</span><span class="free">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span>›</span></span> 
  <span class="keyword1"><span class="command">using</span></span> HMLt_sat_iff_HML_sat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">theorem</span></span><span class="comment1">✐<span class="quoted"><span class="quoted">‹tag <span class="main"><span class="main">(</span></span>proof<span class="main"><span class="main">)</span></span> visible›</span></span></span> HMLt_sat_stable_iff_stable_env_HML_sat<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span> <span class="main">⊆</span> visible_actions›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⊫[</span><span class="free">X</span><span class="main">]</span> <span class="free">φ</span>  <span class="main">⟺</span>  <span class="keyword1">θ[</span><span class="free">X</span><span class="main">](</span><span class="free">p</span><span class="main">)</span> <span class="main">⊨</span> <span class="keyword1">σ(</span><span class="free">φ</span><span class="main">)</span>›</span></span> 
  <span class="keyword1"><span class="command">using</span></span> HMLt_sat_iff_HML_sat assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of <span class="antiquoted"><span class="raw_text"><span class="operator">‹</span>context lts_timeout_mappable›</span></span>›</span>
<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span> <span class="comment1">― ‹of ‹theory››</span>
<span class="comment1">(*&gt;*)</span></pre>
</body>

</html>